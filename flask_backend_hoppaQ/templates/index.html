<!DOCTYPE html>
<html>
<head>
    <script src="//code.jquery.com/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
    <!-- <script src="static/js/style.css"></script> -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
<style>
* {
  box-sizing: border-box;
}

/* Create two equal columns that floats next to each other */
.column {
  float: left;
  width: 25%;
  padding: 10px;
  height: 300px; /* Should be removed. Only for demonstration */
}

/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}
</style>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    
    <script>
    
    $(document).ready(function(){
        //connect to the socket server.
        var socket = io.connect('http://' + document.domain + ':' + location.port + '/test');
        var name = [];
        var qty = [];
        var brandName = [];
        var price = [];

        //receive details from server
        socket.on('newnumber', function(msg) {
            console.log("Received number " + msg.name);
            console.log("Received qty " + msg.qty)
            //maintain a list of ten numbers
            // if (numbers_received.length >= 20){
            //     numbers_received.shift()
            // }            
            name.push(msg.name);
            qty.push(msg.qty);
            brandName.push(msg.brandName);
            price.push(msg.price);
            // console.log
            name_string = '';
            for (var i = 0; i < name.length; i++){
                name_string = name_string + '<p>' + name[i].toString() + '<p>';
            }
            qty_string = '';
            for (var i = 0; i < qty.length; i++){
                qty_string = qty_string + '<p>' + qty[i].toString() + '<p>';
            }
            brandName_string = '';
            for (var i = 0; i < brandName.length; i++){
                brandName_string = brandName_string + '<p>' + brandName[i].toString() + '<p>';
            }
            price_string = '';
            for (var i = 0; i < price.length; i++){
                price_string = price_string + '<p>' + price[i].toString() + '<p>';
            }
            // var name = '' + '<p>' + msg.name + '<p>';
            // var qty  = '' + '<p>' + msg.qty + '<p>';
            // var brandName = '' + '<p>' + msg.brandName  + '<p>'
            $('#log').html(name_string);
            $('#qty').html(qty_string);
            $('#brandName').html(brandName_string);
            $('#price').html(price_string);
        });

    });
  </script>

</head>
<body>
<div class="container">
  <div class="jumbotron">
    <h1>Asynchronous Flask Communication</h1>
    <p>Random numbers generated by the Flask server will appear below, asynchronously.</p>
    <p>Details <a href='https://www.shanelynn.ie/asynchronous-updates-to-a-webpage-with-flask-and-socket-io/' target='_blank'>here.</a></p>
  </div>
</div>
    
</div>

<div class="container" id="content">
    <div class="row">
        <p>Asynchronous page updates will appear here:</p>
        <h3>Number list:</h3>
        <div class="row">
          <div class="column" style="background-color:#aaa;">
            <h2>Product</h2>
            <!-- <p>Some text..</p> -->
            <div id="log"></div> 
          </div>
          <div class="column" style="background-color:#bbb;">
            <h2>Brand</h2>
            <div id="brandName"></div>
            <!-- <p>Some text..</p> -->
          </div>
          <div class="column" style="background-color:#bbb;">
            <h2>Quantity</h2>
            <div id="qty"></div>
            <!-- <p>Some text..</p> -->
          </div>
          <div class="column" style="background-color:#bbb;">
            <h2>Price</h2>
            <div id="price"></div>
            <!-- <p>Some text..</p> -->
          </div>
        </div>
        <!-- <div class="row">
          <div class="column">
            <div id="log"></div> 
          </div>
          <div class="column">
            <div id="qty"></div>
          </div>
         <div id = "name"></div>
        </div> -->
    </div>
</div>


</body>
</html>
